{
  "_metadata": {
    "source": "Personetics Financial AI Chatbot Assignment",
    "document": "financial-agent-assignment.docx",
    "version": "DYNAMIC_TESTS_V2",
    "total_queries": 17,
    "clear_queries": 12,
    "vague_queries": 5,
    "queries_with_category_mapping": 14,
    "note": "Expected answers calculated dynamically at test runtime from transactions.csv. Includes 2024 historical queries."
  },

  "1": {
    "query": "What is my current balance?",
    "clarity": "CLEAR",
    "core_query_categories": ["UC-01"],
    "primary_category": "UC-01",
    "test_type": "balance_calculation",
    "validation": {
      "method": "SUM(credits) - SUM(debits)",
      "direction_credit": "C",
      "direction_debit": "D"
    }
  },

  "2": {
    "query": "Show me my last transaction",
    "clarity": "CLEAR",
    "core_query_categories": ["UC-01"],
    "primary_category": "UC-01",
    "test_type": "last_transaction",
    "validation": {
      "method": "MAX(date)",
      "return_fields": ["transaction_id", "date", "amount", "subCategoryName"]
    }
  },

  "3": {
    "query": "How much did I spend on dining last month compared to September?",
    "clarity": "CLEAR",
    "core_query_categories": ["UC-02", "UC-03", "UC-04"],
    "primary_category": "UC-02",
    "expected_category_mapping": {
      "user_term": "dining",
      "categoryGroupId": "CG800",
      "categoryGroupName": "Dining",
      "mapping_level": "group"
    },
    "test_type": "compare_two_periods",
    "validation": {
      "period_1": "last_month",
      "period_2": "september",
      "aggregation": "SUM",
      "field": "amount",
      "direction": "D",
      "category_filter": "categoryGroupId = CG800"
    }
  },

  "4": {
    "query": "How much did I spend on groceries last month?",
    "clarity": "CLEAR",
    "core_query_categories": ["UC-02", "UC-03", "UC-04"],
    "primary_category": "UC-02",
    "expected_category_mapping": {
      "user_term": "groceries",
      "categoryGroupId": "CG10000",
      "categoryGroupName": "Groceries",
      "mapping_level": "group"
    },
    "test_type": "sum_single_period",
    "validation": {
      "period": "last_month",
      "aggregation": "SUM",
      "field": "amount",
      "direction": "D",
      "category_filter": "categoryGroupId = CG10000"
    }
  },

  "5": {
    "query": "Transactions from March",
    "clarity": "CLEAR",
    "core_query_categories": ["UC-01", "UC-03"],
    "primary_category": "UC-03",
    "test_type": "list_transactions_period",
    "validation": {
      "period": "march_current_year",
      "return_fields": ["count", "total_credits", "total_debits"]
    }
  },

  "6": {
    "query": "How many transactions this week?",
    "clarity": "CLEAR",
    "core_query_categories": ["UC-02", "UC-03"],
    "primary_category": "UC-02",
    "test_type": "count_transactions_period",
    "validation": {
      "period": "this_week",
      "aggregation": "COUNT"
    }
  },

  "7": {
    "query": "How much did I spend on healthcare last month?",
    "clarity": "CLEAR",
    "core_query_categories": ["UC-02", "UC-03", "UC-04"],
    "primary_category": "UC-02",
    "expected_category_mapping": {
      "user_term": "healthcare",
      "categoryGroupId": "CG300",
      "categoryGroupName": "Healthcare & Medical",
      "mapping_level": "group"
    },
    "test_type": "sum_single_period",
    "validation": {
      "period": "last_month",
      "aggregation": "SUM",
      "field": "amount",
      "direction": "D",
      "category_filter": "categoryGroupId = CG300"
    }
  },

  "8": {
    "query": "Show me my gym payments this year",
    "clarity": "CLEAR",
    "core_query_categories": ["UC-01", "UC-03", "UC-04"],
    "primary_category": "UC-01",
    "expected_category_mapping": {
      "user_term": "gym",
      "categoryGroupId": "CG1700",
      "categoryGroupName": "Fitness & Sports",
      "subCategoryId": "C1701",
      "subCategoryName": "Gym & Fitness Center",
      "mapping_level": "subcategory"
    },
    "test_type": "list_transactions_period",
    "validation": {
      "period": "this_year",
      "category_filter": "subCategoryId = C1701",
      "return_fields": ["count", "total_amount"]
    }
  },

  "9": {
    "query": "How much did I spend on utilities in November compared to October?",
    "clarity": "CLEAR",
    "core_query_categories": ["UC-02", "UC-03", "UC-04"],
    "primary_category": "UC-02",
    "expected_category_mapping": {
      "user_term": "utilities",
      "categoryGroupId": "CG200",
      "categoryGroupName": "Utilities & Bills",
      "mapping_level": "group"
    },
    "test_type": "compare_two_periods",
    "validation": {
      "period_1": "november_current_year",
      "period_2": "october_current_year",
      "aggregation": "SUM",
      "field": "amount",
      "direction": "D",
      "category_filter": "categoryGroupId = CG200"
    }
  },

  "10": {
    "query": "Show me my last pharmacy transaction",
    "clarity": "CLEAR",
    "core_query_categories": ["UC-01", "UC-04"],
    "primary_category": "UC-01",
    "expected_category_mapping": {
      "user_term": "pharmacy",
      "categoryGroupId": "CG300",
      "categoryGroupName": "Healthcare & Medical",
      "subCategoryId": "C302",
      "subCategoryName": "Pharmacy",
      "mapping_level": "subcategory"
    },
    "test_type": "last_transaction_by_category",
    "validation": {
      "method": "MAX(date)",
      "category_filter": "subCategoryId = C302",
      "return_fields": ["transaction_id", "date", "amount"]
    }
  },
 
 "11": {
    "query": "What are my coffee shop expenses?",
    "clarity": "CLEAR",
    "core_query_categories": ["UC-02", "UC-03", "UC-04"],
    "primary_category": "UC-02",
    "expected_category_mapping": {
      "user_term": "coffee shop",
      "categoryGroupId": "CG800",
      "categoryGroupName": "Dining",
      "subCategoryId": "C806",
      "subCategoryName": "Cafes & Coffee Shops",
      "mapping_level": "subcategory"
    },
    "test_type": "sum_by_category_default_timeframe",
    "validation": {
      "period": "default_timeframe",
      "aggregation": "SUM",
      "field": "amount",
      "direction": "D",
      "category_filter": "subCategoryId = C806"
    },
    "notes": "Per SPECIAL RULE in prompt: '[category] expenses' patterns are CLEAR/UC-04, use product default timeframe, do NOT ask for clarification"
  },

  "12": {
    "query": "Show me recent transactions",
    "clarity": "VAGUE",
    "core_query_categories": ["UC-05"],
    "primary_category": "UC-05",
    "missing_info": ["timeframe"],
    "clarifying_question": "What time period do you mean by 'recent'? Last 7 days, last 30 days, or this month?",
    "test_type": "vague_needs_clarification"
  },

  "13": {
    "query": "Show me large purchases",
    "clarity": "VAGUE",
    "core_query_categories": ["UC-05"],
    "primary_category": "UC-05",
    "missing_info": ["amount_threshold"],
    "clarifying_question": "What amount do you consider a large purchase? Above $100, $500, or $1000?",
    "test_type": "vague_needs_clarification"
  },

  "14": {
    "query": "Show me recent large purchases at coffee shops",
    "clarity": "VAGUE",
    "core_query_categories": ["UC-05"],
    "primary_category": "UC-05",
    "missing_info": ["timeframe", "amount_threshold"],
    "clarifying_question": "To help you with this, I need to know: (1) What time period do you mean by 'recent'? (2) What amount do you consider a 'large' purchase?",
    "expected_category_mapping": {
      "user_term": "coffee shops",
      "categoryGroupId": "CG800",
      "categoryGroupName": "Dining",
      "subCategoryId": "C806",
      "subCategoryName": "Cafes & Coffee Shops",
      "mapping_level": "subcategory"
    },
    "test_type": "vague_needs_clarification"
  },

  "15": {
    "query": "What are my pet expenses?",
    "clarity": "VAGUE",
    "core_query_categories": ["UC-05"],
    "primary_category": "UC-05",
    "missing_info": ["timeframe"],
    "clarifying_question": "For which period would you like to see your pet expenses?",
    "expected_category_mapping": {
      "user_term": "pet",
      "categoryGroupId": "CG1300",
      "categoryGroupName": "Pets",
      "mapping_level": "group"
    },
    "test_type": "vague_needs_clarification"
  },

  "16": {
    "query": "How much did I spend on dining in September 2024 compared to September 2025?",
    "clarity": "CLEAR",
    "core_query_categories": ["UC-02", "UC-03", "UC-04"],
    "primary_category": "UC-02",
    "expected_category_mapping": {
      "user_term": "dining",
      "categoryGroupId": "CG800",
      "categoryGroupName": "Dining",
      "mapping_level": "group"
    },
    "test_type": "compare_two_periods",
    "validation": {
      "period_1": "september_2024",
      "period_2": "september_2025",
      "aggregation": "SUM",
      "field": "amount",
      "direction": "D",
      "category_filter": "categoryGroupId = CG800"
    },
    "notes": "Cross-year comparison query - tests explicit year handling. Sept 2024: $811.05, Sept 2025: $668.20"
  },

  "17": {
    "query": "How much did I spend on groceries in November 2024?",
    "clarity": "CLEAR",
    "core_query_categories": ["UC-02", "UC-03", "UC-04"],
    "primary_category": "UC-02",
    "expected_category_mapping": {
      "user_term": "groceries",
      "categoryGroupId": "CG10000",
      "categoryGroupName": "Groceries",
      "mapping_level": "group"
    },
    "test_type": "sum_single_period",
    "validation": {
      "period": "november_2024",
      "aggregation": "SUM",
      "field": "amount",
      "direction": "D",
      "category_filter": "categoryGroupId = CG10000"
    },
    "notes": "Historical 2024 query - tests explicit year handling. Nov 2024: $412.75"
  }
}